{% set footer_show_participation = true %}

{% extends 'ambassador/register/layout.html.twig' %}

{% block layout_header %}

{% endblock %}

{% block register_notice %}
    <div class="mt-3">
        <p class="font-weight-bold">
            Les informations de cette page<br>
            sont indispensables à votre inscription.<br>
            Elles ne seront pas visibles sur le site.
        </p>
    </div>
{% endblock %}

{% block content %}
    <div class="ambassador-register-step-0">
        <div class="{# register-condition" #}">

            <p class="required_informations">{{ "page.ambassador.register.step_0.introduction"|trans|raw }}</p>


            {#        <p class="alert alert-warning text-center" id="not-eligible-message">Votre installation n'ayant pas été réalisée par un professionnel, nous ne pouvons pas être sûr de sa qualité. Vous n'êtes pas éligible au programme Ambassadeurs.</p>#}

            {% set form_url = ((contact is defined and contact != null) ? path('ambassador_register', {'hash': contact.hash}) : path('ambassador_register') ) %}
            {% set firstname_value = ((contact is defined and contact != null) ? contact.firstname : validator.value('firstname') ) %}
            {% set lastname_value = ((contact is defined and contact != null) ? contact.lastname : validator.value('lastname') ) %}
            {% set username_value = ((contact is defined and contact != null) ? contact.email : validator.value('username') ) %}
            {#

            <div    data-facebook-app-id="{{ facebook_app_id }}"
                    data-endpoint="{{ path('ambassador_login_fb') }}"
                    id="register-via-fb-button"
                    class="fb-login-button js-facebook-login"
                    scope="email"
                    data-max-rows="1"
                    data-size="large"
                    data-button-type="continue_with"
                    onlogin="checkFacebookLoginState()"
                    data-show-faces="false"
                    data-use-continue-as="false"></div>

            #}

            <form action="{{ form_url }}" method="post">

                {#
                                <p class="alert alert-warning text-center" id="not-eligible-message">Désolé, vous n'êtes pas éligible au programme ambassadeur</p>
                #}

                {#<div class="form-group">
                    <div class="row">
                        <div class="col-xs-12 col">
                            <label for="firstname">{{ 'page.ambassador_register.firstname'|trans }}</label>
                            <input required type="text" class="form-control" id="firstname" name="firstname" value="{{ firstname_value }}" data-error="{{ validator.error('firstname') }}">
                        </div>
                        <div class="col-xs-12 col">
                            <label for="lastname">{{ 'page.ambassador_register.lastname'|trans }}</label>
                            <input required type="text" class="form-control" id="lastname" name="lastname" value="{{ lastname_value }}" data-error="{{ validator.error('lastname') }}">
                        </div>
                    </div>
                </div>
                {% if birthdate_enabled %}
                <div class="form-group">
                    <label for="birthdate">Date de naissance</label>
                    <input type="date" class="form-control" id="birthdate" name="birthdate" value="{{ validator.value('birthdate') }}" data-error="{{ validator.error('birthdate') }}">
                </div>
                {% endif %}
                <div class="form-group">
                    <label for="username">{{ 'page.ambassador_register.email'|trans }}</label>
                    <input required type="text" class="form-control" id="username" name="username" value="{{ username_value }}" data-error="{{ validator.error('username') }}">
                </div>
                <div class="form-group">
                    <div class="row">
                        <div class="col-xs-12 col">
                            <label for="password">{{ 'page.ambassador_register.password'|trans }} <span class="text-muted">(au moins 6 caractères)</span></label>
                            <input required type="password" class="form-control" id="password" name="password" value="{{ validator.value('password') }}" data-error="{{ validator.error('password') }}">
                        </div>
                        <div class="col-xs-12 col">
                            <label for="password_confirm">{{ 'page.ambassador_register.password_confirm'|trans }}</label>
                            <input required type="password" class="form-control" id="password_confirm" name="password_confirm" value="{{ validator.value('password_confirm') }}" data-error="{{ validator.error('password_confirm') }}">
                        </div>
                    </div>
                </div>

                {% include 'ambassador/_forms/basic_informations.html.twig' %}#}

                {% for element in form_properties %}
                    {% include ['ambassador/_forms/_properties/' ~ element ~ '.html.twig'] %}
                {% endfor %}

{#                <p class="mt-3"><small>{{ ('page.ambassador.register.step_0.text_end'|trans)}} <a id="refConditions" class="refConditions" style="color: #273a60 ;text-decoration: underline !important;" target="_blank" href="{{ path('static_page', {'slug': ('page.ambassador.register.step_0.lienMentions'|trans)}) }}">{{ ('page.ambassador.register.step_0.add_text_end'|trans)}}</a></small></p>#}

                {#<!-- <div class="g-recaptcha" data-sitekey="{{ google_recaptcha_key }}"></div> -->#}

                <div class="row mb-5 mt-5">
                    <div class="col"></div>
                    <div class="col text-right">
                        <button id="step0disabled" type="submit" class="btn btn-theme">{{ 'page.ambassador.register.step_0.submit_button'|trans }}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>


    <script type="text/javascript">
        $(document).ready(function () {

            $('form').submit(function (e) {

                //stop submitting the form to see the disabled button effect
                //e.preventDefault();

                //disable the submit button
                $("#step0disabled").prop('disabled', true);
               // alert("true");

                //disable a normal button
                // $("#btnTest").attr("disabled", true);

                return true;

            });
        });
    </script>
{% endblock %}
